<?xml version="1.0" encoding="UTF-8"?>
<!--
###########################################
# Profile: [O] A Realm Reborn (Patch 2.5) #
###########################################
# Authors: y2krazy                        #
#          kagamihiiragi17                #
###########################################
# Version: 3.0.0                          #
###########################################
# Required Level: 50+                     #
###########################################
# Required Setup:                         #
#  None                                   #
###########################################
# Required User Interaction:              #
#  6 Duty Finder Queues                   #
###########################################
-->
<Profile>
    <Name>[O] A Realm Reborn (Patch 2.5) (v3.0.0)</Name>
    <BehaviorDirectory>../Quest Behaviors</BehaviorDirectory>
    <KillRadius>90</KillRadius>
    <Order>

        <BotSettings AutoEquip="1"/>

        <If Condition="not IsQuestCompleted(65625)">
            <LogMessage Message="[Pre-Requisite Check] You haven't completed the Let Us Cling Together quest yet!"/>
            <LogMessage Message="[Pre-Requisite Check] Loading the A Realm Reborn (Patch 2.4) profile..."/>
            <LoadProfile Path="[O] A Realm Reborn (Patch 2.4).xml"/>
        </If>

        <If Condition="(ClassName != ClassJobType.Astrologian) and (ClassName != ClassJobType.Bard) and (ClassName != ClassJobType.BlackMage) and (ClassName != ClassJobType.DarkKnight) and (ClassName != ClassJobType.Dragoon) and (ClassName != ClassJobType.Machinist) and (ClassName != ClassJobType.Monk) and (ClassName != ClassJobType.Ninja) and (ClassName != ClassJobType.Paladin) and (ClassName != ClassJobType.RedMage) and (ClassName != ClassJobType.Scholar) and (ClassName != ClassJobType.Samurai) and (ClassName != ClassJobType.Summoner) and (ClassName != ClassJobType.Warrior) and (ClassName != ClassJobType.WhiteMage)">
            <LogMessage Message="[Job Check] You do not have a job assigned on your character."/>
            <LogMessage Message="[Job Check] Equipping your Soul Crystal now..."/>
            <If Condition="ClassName == ClassJobType.Archer">
                <RunCode Name="EquipBRDCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Thaumaturge">
                <RunCode Name="EquipBLMCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Lancer">
                <RunCode Name="EquipDRGCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Pugilist">
                <RunCode Name="EquipMNKCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Rogue">
                <RunCode Name="EquipNINCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Gladiator">
                <RunCode Name="EquipPLDCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Arcanist">
                <RunCode Name="EquipSCHCrystal"/>
                <WaitTimer WaitTime="3"/>
                <RunCode Name="EquipSMNCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Marauder">
                <RunCode Name="EquipWARCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="ClassName == ClassJobType.Conjurer">
                <RunCode Name="EquipWHMCrystal"/>
                <WaitTimer WaitTime="3"/>
            </If>
            <If Condition="(ClassName != ClassJobType.Bard) and (ClassName != ClassJobType.BlackMage) and (ClassName != ClassJobType.Dragoon) and (ClassName != ClassJobType.Monk) and (ClassName != ClassJobType.Ninja) and (ClassName != ClassJobType.Paladin) and (ClassName != ClassJobType.Scholar) and (ClassName != ClassJobType.Summoner) and (ClassName != ClassJobType.Warrior) and (ClassName != ClassJobType.WhiteMage)">
                <LogMessage Message="[Job Check] You do not have the proper Soul Crystal in your Armoury or Inventory."/>
                <LogMessage Message="[Job Check] Loading the Class and Job Quests profile..."/>
                <LoadProfile Path="[O] Class and Job Quests.xml"/>
            </If>
        </If>

        <!-- A Recurring Problem -->
        <If Condition="not IsQuestCompleted(66583)">
            <If Condition="not HasQuest(66583)">
                <GetTo ZoneId="212" Name="Minfilia" XYZ="35.47971, 1.214808, 0.8027592"/>
                <If Condition="IsQuestAcceptQualified(66583)">
                    <PickupQuest NpcId="1006693" QuestId="66583" XYZ="39.29187, 1.214808, 0.8086548"/>
                </If>
            </If>
            <If Condition="HasQuest(66583)">
                <If Condition="GetQuestStep(66583) == 255">
                    <GetTo ZoneId="212" Name="Urianger" XYZ="-2.822998, -3.000001, -56.22955"/>
                    <TurnIn QuestId="66583" NpcId="1007478" XYZ="-2.822998, -3.000001, -56.22955"/>
                </If>
            </If>
        </If>
        <!-- Ifrit Bleeds, We Can Kill It -->
        <If Condition="not IsQuestCompleted(66584)">
            <If Condition="not HasQuest(66584)">
                <GetTo ZoneId="212" Name="Thancred" XYZ="1.480042, -3.000001, -48.72211"/>
                <If Condition="IsQuestAcceptQualified(66584)">
                    <PickupQuest NpcId="1007534" QuestId="66584" XYZ="1.480042, -3.000001, -48.72211"/>
                </If>
            </If>
            <If Condition="HasQuest(66584)">
                <If Condition="GetQuestStep(66584) == 1">
                    <GetTo ZoneId="130" XYZ="-141.6495, 4.1, -114.6716"/> <!-- Swift -->
                    <TalkTo NpcId="1004576" XYZ="-141.6495, 4.1, -114.6716" QuestId="66584" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(66584) == 255">
                    <GetTo ZoneId="146" XYZ="713.4625, 3.846601, -72.28091"/> <!-- Safe Spot -->
                    <LogMessage Message="[A Realm Reborn (2.5)] Attuning to the Zahar'ak Aetheryte..."/>
                    <MoveTo Name="Zahar'ak Aetheryte" XYZ="693.5275, 3.846602, -90.50888"/>
                    <Dismount/>
                    <MoveTo Name="Zahar'ak Aetheryte" XYZ="692.6243, 5.513888, -80.3129" UseMesh="False"/>
                    <TurnInPlus InteractDistance="5.0" QuestId="66584" NpcId="2002581" XYZ="693.1846, 5.784381, -80.087"/>
                </If>
            </If>
        </If>
        <!-- In for Garuda Awakening -->
        <If Condition="not IsQuestCompleted(66693)">
            <If Condition="not HasQuest(66693)">
                <GetTo ZoneId="212" Name="Papalymo" XYZ="0.1677856, -3.000001, -52.71997"/>
                <If Condition="not IsQuestAcceptQualified(66693)">
                    <UserDialog QuestId="66693" DialogText="Please manually complete The Bowl of Embers (Hard) duty" QuestRequirementInLog="Available"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66693)">
                    <PickupQuest NpcId="1007531" QuestId="66693" XYZ="0.1677856, -3.000001, -52.71997"/>
                </If>
            </If>
            <If Condition="HasQuest(66693)">
                <If Condition="GetQuestStep(66693) == 1">
                    <GetTo ZoneId="132" XYZ="-75.48645, -0.5013741, -5.081299"/> <!-- Vorsaile Heuloix -->
                    <TalkTo NpcId="1000168" XYZ="-75.48645, -0.5013741, -5.081299" QuestId="66693" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(66693) == 255">
                    <GetTo ZoneId="155" XYZ="642.5112, 287.5269, 187.7667"/> <!-- Safe Spot -->
                    <LogMessage Message="[A Realm Reborn (2.5)] Attuning to the Natalan Aetheryte..."/>
                    <Dismount/>
                    <MoveTo Name="Natalan Aetheryte" XYZ="649.7748, 292.4391, 175.3414"/>
                    <TurnInPlus QuestId="66693" NpcId="2002582" XYZ="649.7748, 292.4391, 175.3414"/>
                </If>
            </If>
        </If>
        <!-- In a Titan Spot -->
        <If Condition="not IsQuestCompleted(66694)">
            <If Condition="not HasQuest(66694)">
                <GetTo ZoneId="212" Name="Y'shtola" XYZ="1.285024, -3.000001, -51.00135"/>
                <If Condition="not IsQuestAcceptQualified(66694)">
                    <UserDialog QuestId="66694" DialogText="Please manually complete The Howling Eye (Hard) duty" QuestRequirementInLog="Available"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66694)">
                    <PickupQuest NpcId="1007533" QuestId="66694" XYZ="1.285024, -3.000001, -51.00135"/>
                </If>
            </If>
            <If Condition="HasQuest(66694)">
                <If Condition="GetQuestStep(66694) == 1">
                    <GetTo ZoneId="128" XYZ="97.52039, 40.24854, 81.1322"/> <!-- R'ashaht Rhiki -->
                    <TalkTo NpcId="1003281" XYZ="97.52039, 40.24854, 81.1322" QuestId="66694" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(66694) == 255">
                    <GetTo ZoneId="180" XYZ="144.4336, 27.1674, -622.5881"/> <!-- Safe Spot -->
                    <LogMessage Message="[A Realm Reborn (2.5)] Attuning to the U'Ghamaro Mines Aetheryte..."/>
                    <Dismount/>
                    <MoveTo Name="U'Ghamaro Aetheryte" XYZ="144.4336, 27.1674, -622.5881"/>
                    <TurnInPlus QuestId="66694" NpcId="2002583" XYZ="144.4336, 27.1674, -622.5881"/>
                </If>
            </If>
        </If>
        <!-- Good Intentions -->
        <If Condition="not IsQuestCompleted(65899)">
            <If Condition="not HasQuest(65899)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                <If Condition="not IsQuestAcceptQualified(65899)">
                    <UserDialog QuestId="65899" DialogText="Please manually complete The Navel (Hard) duty" QuestRequirementInLog="Available"/>
                </If>
                <If Condition="IsQuestAcceptQualified(65899)">
                    <PickupQuest NpcId="1008969" QuestId="65899" XYZ="0.9917603, -1.995725, -45.70081"/>
                </If>
            </If>
            <If Condition="HasQuest(65899)">
                <If Condition="GetQuestStep(65899) == 1">
                    <GetTo ZoneId="351" Name="Riol" XYZ="3.067017, 0.009977885, -4.287842"/>
                    <TalkTo NpcId="1010844" XYZ="3.067017, 0.009977885, -4.287842" QuestId="65899" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65899) == 255">
                    <GetTo ZoneId="145" XYZ="-17.22742, -10.01511, -18.50922"/> <!-- Ilberd -->
                    <TurnIn QuestId="65899" NpcId="1010845" XYZ="-17.22742, -10.01511, -18.50922"/>
                </If>
            </If>
        </If>
        <!-- Bait and Switch -->
        <If Condition="not IsQuestCompleted(65900)">
            <If Condition="not HasQuest(65900)">
                <GetTo ZoneId="145" XYZ="-17.22742, -10.01511, -18.50922"/> <!-- Ilberd -->
                <If Condition="IsQuestAcceptQualified(65900)">
                    <PickupQuest NpcId="1010845" QuestId="65900" XYZ="-17.22742, -10.01511, -18.50922"/>
                </If>
            </If>
            <If Condition="HasQuest(65900)">
                <If Condition="GetQuestStep(65900) == 1">
                    <GetTo ZoneId="145" XYZ="349.0806, 23.13136, 103.8071"/> <!-- Ilberd -->
                    <TalkTo NpcId="1010846" XYZ="349.0806, 23.13136, 103.8071" QuestId="65900" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65900) == 2">
                    <GetTo ZoneId="145" XYZ="332.4843, -11.3912, 142.4896"/> <!-- Hired Thug -->
                    <TalkTo NpcId="1010847" XYZ="332.4843, -11.3912, 142.4896" QuestId="65900" StepId="2"/>
                    <Grind grindRef="Bait_and_Switch" while="HasQuest(65900) and GetQuestStep(65900) == 2"/>
                </If>
                <If Condition="GetQuestStep(65900) == 3">
                    <GetTo ZoneId="145" XYZ="199.6947, -14.72504, 162.4628"/> <!-- Destination -->
                    <UseObject NpcId="2005112" XYZ="199.6947, -14.72504, 162.4628" Radius="10" QuestId="65900" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65900) == 255">
                    <GetTo ZoneId="145" XYZ="192.401, -27.4872, 199.3286"/> <!-- Ilberd -->
                    <TurnIn QuestId="65900" NpcId="1010849" XYZ="192.401, -27.4872, 199.3286"/>
                </If>
            </If>
        </If>
        <!-- Best Laid Schemes -->
        <If Condition="not IsQuestCompleted(65901)">
            <If Condition="not HasQuest(65901)">
                <GetTo ZoneId="145" XYZ="192.401, -27.4872, 199.3286"/> <!-- Ilberd -->
                <If Condition="IsQuestAcceptQualified(65901)">
                    <PickupQuest NpcId="1010849" QuestId="65901" XYZ="192.401, -27.4872, 199.3286"/>
                </If>
            </If>
            <If Condition="HasQuest(65901)">
                <If Condition="GetQuestStep(65901) == 1">
                    <GetTo ZoneId="145" XYZ="192.8893, -26.65753, 203.6011"/> <!-- Wooden Crate -->
                    <UseObject NpcId="2005113" XYZ="192.8893, -26.65753, 203.6011" Radius="10" QuestId="65901" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65901) == 2">
                    <GetTo ZoneId="131" XYZ="53.3302, 10.00012, -10.20831"/> <!-- Yuyuhase -->
                    <HandOver ItemId="2001498" QuestId="65901" StepId="2" NpcId="1010850" XYZ="53.3302, 10.00012, -10.20831"/>
                </If>
                <If Condition="GetQuestStep(65901) == 3">
                    <GetTo ZoneId="131" XYZ="137.2548, 4, -20.58447"/> <!-- Riol -->
                    <TalkTo NpcId="1010853" XYZ="137.2548, 4, -20.58447" QuestId="65901" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65901) == 255">
                    <GetTo ZoneId="351" Name="Tataru" XYZ="-3.677429, 0.01804011, -7.034485"/>
                    <TurnIn QuestId="65901" NpcId="1010891" XYZ="-3.677429, 0.01804011, -7.034485"/>
                </If>
            </If>
        </If>
        <!-- The Rising Chorus -->
        <If Condition="not IsQuestCompleted(65902)">
            <If Condition="not HasQuest(65902)">
                <GetTo ZoneId="351" Name="Tataru" XYZ="-3.677429, 0.01804011, -7.034485"/>
                <If Condition="IsQuestAcceptQualified(65902)">
                    <PickupQuest NpcId="1010891" QuestId="65902" XYZ="-3.677429, 0.01804011, -7.034485"/>
                </If>
            </If>
            <If Condition="HasQuest(65902)">
                <If Condition="GetQuestStep(65902) == 1">
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                    <TalkTo NpcId="1008969" XYZ="0.9917603, -1.995725, -45.70081" QuestId="65902" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65902) == 2">
                    <GetTo ZoneId="156" Name="Doman Watch" XYZ="336.3545, -27.80885, -369.7414"/>
                    <TalkTo NpcId="1010881" XYZ="336.3545, -27.80885, -369.7414" QuestId="65902" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65902) == 3">
                    <UserDialog QuestId="65902" StepId="3" DialogText="Please manually complete The Keeper of the Lake duty" />
                    <WaitWhile Condition="GetQuestStep(65902) != 5"/>
                </If>
                <If Condition="GetQuestStep(65902) == 5">
                    <GetTo ZoneId="156" XYZ="336.3545, -27.80885, -369.7414"/> <!-- Doman Refugee -->
                    <TalkTo NpcId="1010881" XYZ="336.3545, -27.80885, -369.7414" QuestId="65902" StepId="5"/>
                </If>
                <If Condition="GetQuestStep(65902) == 6">
                    <GetTo ZoneId="351" Name="Alphinaud" XYZ="2.548157, -1.995725, -42.00812"/>
                    <TalkTo NpcId="1010857" XYZ="2.548157, -1.995725, -42.00812" QuestId="65902" StepId="6"/>
                </If>
                <If Condition="GetQuestStep(65902) == 255">
                    <GetTo ZoneId="351" Name="Alphinaud" XYZ="-1.907471, 7.450581E-09, -3.128174"/>
                    <TurnIn QuestId="65902" NpcId="1010858" XYZ="-1.907471, 7.450581E-09, -3.128174"/>
                </If>
            </If>
        </If>
        <!-- Aether on Demand -->
        <If Condition="not IsQuestCompleted(69424)">
            <If Condition="not HasQuest(69424)">
                <GetTo ZoneId="351" Name="Alphinaud" XYZ="-1.907471, 7.450581E-09, -3.128174"/>
                <If Condition="IsQuestAcceptQualified(69424)">
                    <PickupQuest NpcId="1010858" QuestId="69424" XYZ="-1.907471, 7.450581E-09, -3.128174"/>
                </If>
            </If>
            <If Condition="HasQuest(69424)">
                <If Condition="GetQuestStep(69424) == 1">
                    <GetTo ZoneId="351" Name="Moenbryda" XYZ="31.96765, -1, 2.914429"/>
                    <TalkTo NpcId="1010890" XYZ="31.96765, -1, 2.914429" QuestId="69424" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(69424) == 2">
                    <GetTo ZoneId="351" Name="Moenbryda" XYZ="2.822876, -1.995725, -41.24518"/>
                    <TalkTo NpcId="1010860" XYZ="2.822876, -1.995725, -41.24518" QuestId="69424" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(69424) == 3">
                    <GetTo ZoneId="351" Name="Alphinaud" XYZ="-1.907471, 7.450581E-09, -3.128174"/>
                    <TalkTo NpcId="1010858" XYZ="-1.907471, 7.450581E-09, -3.128174" QuestId="69424" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(69424) == 4">
                    <GetTo ZoneId="147" XYZ="-63.52338, 47, 25.19263"/> <!-- Wilred -->
                    <TalkTo NpcId="1010861" XYZ="-63.52338, 47, 25.19263" QuestId="69424" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(69424) == 255">
                    <GetTo ZoneId="147" XYZ="-29.95355, 46.99734, 32.54749"/> <!-- Edelstein -->
                    <TurnIn QuestId="69424" NpcId="1006646" ItemId="2001548" XYZ="-29.95355, 46.99734, 32.54749"/>
                </If>
            </If>
        </If>
        <!-- On the Counteroffensive -->
        <If Condition="not IsQuestCompleted(65904)">
            <If Condition="not HasQuest(65904)">
                <GetTo ZoneId="147" XYZ="-29.95355, 46.99734, 32.54749"/> <!-- Edelstein -->
                <If Condition="IsQuestAcceptQualified(65904)">
                    <PickupQuest NpcId="1006646" QuestId="65904" XYZ="-29.95355, 46.99734, 32.54749"/>
                </If>
            </If>
            <If Condition="HasQuest(65904)">
                <If Condition="GetQuestStep(65904) == 1">
                    <GetTo ZoneId="147" XYZ="-72.12946, 47, -8.86554"/> <!-- Alianne -->
                    <TalkTo NpcId="1010924" XYZ="-72.12946, 47, -8.86554" QuestId="65904" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65904) == 2">
                    <GetTo ZoneId="147" XYZ="-133.9285, 59.66894, -94.22449"/> <!-- Yuyuhase -->
                    <TalkTo NpcId="1010867" XYZ="-133.9285, 59.66894, -94.22449" QuestId="65904" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65904) == 3">
                    <GetTo ZoneId="147" XYZ="-258.1064, 60.33958, -65.62909"/> <!-- Grinding Area -->
                    <Grind grindRef="On_the_Counteroffensive" while="HasQuest(65904) and GetQuestStep(65904) == 3"/>
                </If>
                <If Condition="GetQuestStep(65904) == 4">
                    <GetTo ZoneId="147" XYZ="-267.4754, 82.42139, -177.8135"/> <!-- Grinding Area -->
                    <Grind grindRef="On_the_Counteroffensive2" while="HasQuest(65904) and GetQuestStep(65904) == 4"/>
                </If>
                <If Condition="GetQuestStep(65904) == 5">
                    <GetTo ZoneId="147" XYZ="-110.3685, 64.86192, -127.2756"/> <!-- Yuyuhase -->
                    <TalkTo NpcId="1010876" XYZ="-110.3685, 64.86192, -127.2756" QuestId="65904" StepId="5"/>
                </If>
                <If Condition="GetQuestStep(65904) == 255">
                    <GetTo ZoneId="147" XYZ="-29.95355, 46.99734, 32.54749"/> <!-- Edelstein -->
                    <TurnIn QuestId="65904" NpcId="1006646" XYZ="-29.95355, 46.99734, 32.54749"/>
                </If>
            </If>
        </If>
        <!-- An Uninvited Ascian -->
        <If Condition="not IsQuestCompleted(65905)">
            <If Condition="not HasQuest(65905)">
                <GetTo ZoneId="147" XYZ="-29.95355, 46.99734, 32.54749"/> <!-- Edelstein -->
                <If Condition="IsQuestAcceptQualified(65905)">
                    <PickupQuest NpcId="1006646" QuestId="65905" XYZ="-29.95355, 46.99734, 32.54749"/>
                </If>
            </If>
            <If Condition="HasQuest(65905)">
                <If Condition="GetQuestStep(65905) == 1">
                    <GetTo ZoneId="147" XYZ="136.3392, 31.9962, 16.09827"/> <!-- Moenbryda -->
                    <TalkTo NpcId="1010879" XYZ="136.3392, 31.9962, 16.09827" QuestId="65905" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65905) == 2">
                    <If Condition="not IsOnMap(156) and not IsOnMap(351)">
                        <GetTo ZoneId="156" XYZ="21.13373, 22.32391, -631.281"/> <!-- Rising Stones Entrance -->
                    </If>
                    <If Condition="IsOnMap(156)">
                        <UseTransport Name="Rising Stones Entrance" NpcId="2002881" XYZ="21.13373, 22.32391, -631.281" InteractDistance="3.0"/>
                    </If>
                    <If Condition="IsOnMap(351) and IsOnSubMap(1350)">
                        <UseTransport Name="Exit to the Rising Stones" NpcId="2002880" XYZ="-0.01531982, -1.022339, -29.25159" InteractDistance="3.0"/>
                    </If>
                    <WaitWhile Condition="GetQuestStep(65905) == 2"/>
                </If>
                <If Condition="GetQuestStep(65905) == 3">
                    <UserDialog QuestId="65905" StepId="3" DialogText="Please manually complete The Chrysalis  duty" />
                    <WaitWhile Condition="GetQuestStep(65905) != 255"/>
                </If>
                <If Condition="GetQuestStep(65905) == 255">
                    <!-- Rewards

                    0: Accuracy Materia IV
                    1: Critical Hit Rate Materia IV
                    2: Determination Materia IV

                    If you want a specific reward from the above list, replace the TurnIn tag below with the following and change the "Reward Slot" to the number you want:

                    <TurnIn QuestId="65905" NpcId="1011000" XYZ="-0.07635498, -1.995725, -42.25226" RewardSlot="0" />

                    -->

                    <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.07635498, -1.995725, -42.25226"/>
                    <TurnIn QuestId="65905" NpcId="1011000" XYZ="-0.07635498, -1.995725, -42.25226"/>
                </If>
            </If>
        </If>
        <!-- In Memory of Moenbryda -->
        <If Condition="not IsQuestCompleted(65965)">
            <If Condition="not HasQuest(65965)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.07635498, -1.995725, -42.25226"/>
                <If Condition="IsQuestAcceptQualified(65965)">
                    <PickupQuest NpcId="1011000" QuestId="65965" XYZ="-0.07635498, -1.995725, -42.25226"/>
                </If>
            </If>
            <If Condition="HasQuest(65965)">
                <If Condition="GetQuestStep(65965) == 1">
                    <GetTo ZoneId="156" XYZ="-50.62765, 17.88646, -627.1751"/>
                    <FlyTo XYZ="-243.5051, 67.38368, -413.7113"/>
                    <FlyTo XYZ="-228.1109, 54.38685, -243.5217"/>
                    <FlyTo Land="True" XYZ="-161.7356, 39.91045, -193.9863"/>
                    <UseObject NpcId="2005045" XYZ="-146.4409, 43.65601, -188.6168" Radius="10" QuestId="65965" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65965) == 255">
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                    <TurnIn QuestId="65965" NpcId="1010897" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
        </If>
        <!-- Mask of Grief -->
        <If Condition="not IsQuestCompleted(65906)">
            <If Condition="not HasQuest(65906)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                <If Condition="IsQuestAcceptQualified(65906)">
                    <PickupQuest NpcId="1010897" QuestId="65906" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
            <If Condition="HasQuest(65906)">
                <If Condition="GetQuestStep(65906) == 1">
                    <GetTo ZoneId="351" Name="Yda" XYZ="24.88745, -1, -1.022339"/>
                    <TalkTo NpcId="1010903" XYZ="24.88745, -1, -1.022339" QuestId="65906" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65906) == 2">
                    <GetTo ZoneId="156" Name="Rowena" XYZ="25.28184, 29, -821.0602"/>
                    <HandOver ItemId="2001546" QuestId="65906" StepId="2" NpcId="1001304" XYZ="25.28184, 29, -821.0602"/>
                </If>
                <If Condition="GetQuestStep(65906) == 3">
                    <GetTo ZoneId="156" XYZ="-146.0642, 43.90116, -190.8459"/> <!-- Yda -->
                    <HandOver ItemId="2001547" QuestId="65906" StepId="3" NpcId="1010929" XYZ="-146.8071, 43.49525, -187.3961"/>
                </If>
                <If Condition="GetQuestStep(65906) == 255">
                    <GetTo ZoneId="351" Name="Alphinaud" XYZ="-1.266479, -1.995725, -42.06915"/>
                    <TurnIn QuestId="65906" NpcId="1010930" XYZ="-1.266479, -1.995725, -42.06915"/>
                </If>
            </If>
        </If>
        <!-- Defenders for Ishgard -->
        <If Condition="not IsQuestCompleted(65907)">
            <If Condition="not HasQuest(65907)">
                <GetTo ZoneId="351" Name="Alphinaud" XYZ="-1.266479, -1.995725, -42.06915"/>
                <If Condition="IsQuestAcceptQualified(65907)">
                    <PickupQuest NpcId="1010930" QuestId="65907" XYZ="-1.266479, -1.995725, -42.06915"/>
                </If>
            </If>
            <If Condition="HasQuest(65907)">
                <If Condition="GetQuestStep(65907) == 1">
                    <GetTo ZoneId="155" XYZ="232.5017, 302, -190.9362"/> <!-- Alphinaud -->
                    <TalkTo NpcId="1010931" XYZ="232.5017, 302, -190.9362" QuestId="65907" StepId="1"/>
                </If>
                <While Condition="GetQuestStep(65907) == 2">
                    <GetTo ZoneId="155" XYZ="-132.1279, 304.2877, -298.3902"/> <!-- Bothered Bowman -->
                    <TalkTo NpcId="1010942" XYZ="-132.1279, 304.2877, -298.3902" QuestId="65907" StepId="2"/>
                    <TalkTo NpcId="1010940" XYZ="-143.2365, 304.1538, -289.3569" QuestId="65907" StepId="2"/>
                    <TalkTo NpcId="1010941" XYZ="-157.0001, 304.1538, -308.1255" QuestId="65907" StepId="2"/>
                    <TalkTo NpcId="1010939" XYZ="-152.697, 304.1538, -321.2177" QuestId="65907" StepId="2"/>
                </While>
                <If Condition="GetQuestStep(65907) == 255">
                    <GetTo ZoneId="155" XYZ="-144.1825, 304.154, -300.7401"/> <!-- Alphinaud -->
                    <TurnIn QuestId="65907" NpcId="1010951" XYZ="-144.1825, 304.154, -300.7401"/>
                </If>
            </If>
        </If>
        <!-- The Wyrm's Roar -->
        <If Condition="not IsQuestCompleted(65908)">
            <If Condition="not HasQuest(65908)">
                <GetTo ZoneId="155" XYZ="-144.1825, 304.154, -300.7401"/> <!-- Alphinaud -->
                <If Condition="IsQuestAcceptQualified(65908)">
                    <PickupQuest NpcId="1010951" QuestId="65908" XYZ="-144.1825, 304.154, -300.7401"/>
                </If>
            </If>
            <If Condition="HasQuest(65908)">
                <If Condition="GetQuestStep(65908) == 1">
                    <GetTo ZoneId="155" XYZ="263.5996, 303.1, -199.9695"/> <!-- Haurchefant -->
                    <TalkTo NpcId="1006384" XYZ="263.5996, 303.1, -199.9695" QuestId="65908" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65908) == 2">
                    <If Condition="not IsOnMap(155) and not IsOnMap(395)">
                        <GetTo ZoneId="155" XYZ="264.9119, 302.2624, -223.7126"/> <!-- House Fortemps Guard-->
                    </If>
                    <If Condition="IsOnMap(155)">
                        <UseTransport Name="House Fortemps Guard" NpcId="1007603" XYZ="264.9119, 302.2624, -223.7126" InteractDistance="3.0"/>
                    </If>
                    <MoveTo Name="Aymeric" XYZ="3.860474, 0.01498271, -0.01531982"/>
                    <TalkTo NpcId="1009974" XYZ="3.860474, 0.01498271, -0.01531982" QuestId="65908" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65908) == 255">
                    <If Condition="not IsOnMap(155) and not IsOnMap(395)">
                        <GetTo ZoneId="155" XYZ="264.9119, 302.2624, -223.7126"/> <!-- House Fortemps Guard-->
                    </If>
                    <If Condition="IsOnMap(155)">
                        <UseTransport Name="House Fortemps Guard" NpcId="1007603" XYZ="264.9119, 302.2624, -223.7126" InteractDistance="3.0"/>
                    </If>
                    <MoveTo Name="Alphinaud" XYZ="-2.792419, 0.01498272, -0.7477417"/>
                    <TurnIn QuestId="65908" NpcId="1010953" XYZ="-2.792419, 0.01498272, -0.7477417"/>
                </If>
            </If>
        </If>
        <!-- Committed to the Cause -->
        <If Condition="not IsQuestCompleted(65909)">
            <If Condition="not HasQuest(65909)">
                <If Condition="not IsOnMap(155) and not IsOnMap(395)">
                    <GetTo ZoneId="155" XYZ="264.9119, 302.2624, -223.7126"/> <!-- House Fortemps Guard-->
                </If>
                <If Condition="IsOnMap(155)">
                    <UseTransport Name="House Fortemps Guard" NpcId="1007603" XYZ="264.9119, 302.2624, -223.7126" InteractDistance="3.0"/>
                </If>
                <If Condition="IsQuestAcceptQualified(65909)">
                    <PickupQuest NpcId="1010953" QuestId="65909" XYZ="-2.792419, 0.01498272, -0.7477417"/>
                </If>
            </If>
            <If Condition="HasQuest(65909)">
                <If Condition="GetQuestStep(65909) == 255">
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                    <TurnIn QuestId="65909" NpcId="1010896" XYZ="0.503479, -1.995725, -42.61847"/>
                </If>
            </If>
        </If>
        <!-- Volunteer Dragonslayers -->
        <If Condition="not IsQuestCompleted(65927)">
            <If Condition="not HasQuest(65927)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                <If Condition="IsQuestAcceptQualified(65927)">
                    <PickupQuest NpcId="1010896" QuestId="65927" XYZ="0.503479, -1.995725, -42.61847"/>
                </If>
            </If>
            <If Condition="HasQuest(65927)">
                <If Condition="GetQuestStep(65927) == 1">
                    <GetTo ZoneId="351" Name="Tataru" XYZ="-3.738525, 0.01804011, -9.353821"/>
                    <TalkTo NpcId="1010911" XYZ="-3.738525, 0.01804011, -9.353821" QuestId="65927" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65927) == 2">
                    <GetTo ZoneId="156" Name="Slafborn" XYZ="21.92719, 20.74698, -682.063"/>
                    <TalkTo NpcId="1006530" XYZ="21.92719, 20.74698, -682.063" QuestId="65927" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65927) == 3">
                    <GetTo ZoneId="156" XYZ="24.2771, 20.04224, -679.9573"/> <!-- Tataru -->
                    <TalkTo NpcId="1010954" XYZ="24.2771, 20.04224, -679.9573" QuestId="65927" StepId="3"/>
                </If>
                <While Condition="GetQuestStep(65927) == 4">
                    <GetTo ZoneId="156" XYZ="103.4408, 31.6068, -739.559"/> <!-- Adept Adventurer -->
                    <TalkTo NpcId="1010955" XYZ="103.4408, 31.6068, -739.559" QuestId="65927" StepId="4"/>
                    <TalkTo NpcId="1010957" XYZ="33.67664, 29, -789.0898" QuestId="65927" StepId="4"/>
                    <TalkTo NpcId="1010956" XYZ="68.86389, 50, -774.3496" QuestId="65927" StepId="4"/>
                    <TalkTo NpcId="1010958" XYZ="47.74548, 20.66574, -685.1759" QuestId="65927" StepId="4"/>
                </While>
                <If Condition="GetQuestStep(65927) == 255">
                    <GetTo ZoneId="156" XYZ="33.27991, 20.495, -655.2072"/> <!-- Tataru -->
                    <TurnIn QuestId="65927" NpcId="1010961" XYZ="33.27991, 20.495, -655.2072"/>
                </If>
            </If>
        </If>
        <!-- An Allied Perspective -->
        <If Condition="not IsQuestCompleted(65954)">
            <If Condition="not HasQuest(65954)">
                <GetTo ZoneId="156" XYZ="33.27991, 20.495, -655.2072"/> <!-- Tataru -->
                <If Condition="IsQuestAcceptQualified(65954)">
                    <PickupQuest NpcId="1010961" QuestId="65954" XYZ="33.27991, 20.495, -655.2072"/>
                </If>
            </If>
            <If Condition="HasQuest(65954)">
                <If Condition="GetQuestStep(65954) == 1">
                    <GetTo ZoneId="131" XYZ="-25.49786, 38.01001, 83.35999"/> <!-- Alphinaud -->
                    <TalkTo NpcId="1009057" XYZ="-25.49786, 38.01001, 83.35999" QuestId="65954" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65954) == 2">
                    <GetTo ZoneId="131" XYZ="-25.49786, 38.01001, 83.35999"/> <!-- Alphinaud -->
                    <TalkTo NpcId="1009057" XYZ="-25.49786, 38.01001, 83.35999" QuestId="65954" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65954) == 3">
                    <GetTo ZoneId="155" XYZ="-168.8411, 304.1538, -328.6641"/> <!-- Marcelain -->
                    <TalkTo NpcId="1006454" XYZ="-168.8411, 304.1538, -328.6641" QuestId="65954" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65954) == 4">
                    <GetTo ZoneId="155" XYZ="-495.8852, 206.4118, -363.0651"/> <!-- Grinding Area -->
                    <Grind grindRef="An_Allied_Perspective" while="HasQuest(65954) and GetQuestStep(65954) == 4"/>
                </If>
                <If Condition="GetQuestStep(65954) == 5">
                    <GetTo ZoneId="155" XYZ="125.1264, 373.6523, -654.3644"/> <!-- Grinding Area -->
                    <Grind grindRef="An_Allied_Perspective2" while="HasQuest(65954) and GetQuestStep(65954) == 5"/>
                </If>
                <If Condition="GetQuestStep(65954) == 255">
                    <GetTo ZoneId="155" XYZ="-168.8411, 304.1538, -328.6641"/> <!-- Marcelain -->
                    <TurnIn QuestId="65954" NpcId="1006454" ItemId="2001548" XYZ="-168.8411, 304.1538, -328.6641"/>
                </If>
            </If>
        </If>
        <!-- The Steps of Faith -->
        <If Condition="not IsQuestCompleted(65955)">
            <If Condition="not HasQuest(65955)">
                <GetTo ZoneId="155" XYZ="-168.8411, 304.1538, -328.6641"/> <!-- Marcelain -->
                <If Condition="IsQuestAcceptQualified(65955)">
                    <PickupQuest NpcId="1006454" QuestId="65955" XYZ="-168.8411, 304.1538, -328.6641"/>
                </If>
            </If>
            <If Condition="HasQuest(65955)">
                <If Condition="GetQuestStep(65955) == 1">
                    <RunCode Name="The_Steps_of_Faith"/>
                    <StopBot/>
                </If>
                <If Condition="GetQuestStep(65955) == 3">
                    <GetTo ZoneId="155" XYZ="-157.8241, 304.1538, -313.8323"/> <!-- Alphinaud -->
                    <TalkTo NpcId="1010978" XYZ="-157.8241, 304.1538, -313.8323" QuestId="65955" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65955) == 255">
                    <!-- Rewards

                    0: Skill Speed Materia IV
                    1: Spell Speed Materia IV

                    If you want a specific reward from the above list, replace the TurnIn tag below with the following and change the "Reward Slot" to the number you want:

                    <TurnIn QuestId="65955" NpcId="1010897" XYZ="0.9613037, -1.995725, -45.60925" RewardSlot="0" />

                    -->
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                    <TurnIn QuestId="65955" NpcId="1010897" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
        </If>
        <!-- Administrative Decision -->
        <If Condition="not IsQuestCompleted(65956)">
            <If Condition="not HasQuest(65956)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                <If Condition="IsQuestAcceptQualified(65956)">
                    <PickupQuest NpcId="1010897" QuestId="65956" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
            <If Condition="HasQuest(65956)">
                <If Condition="GetQuestStep(65956) == 1">
                    <GetTo ZoneId="351" Name="Destination" XYZ="-4.135254, 0.01519775, -9.628479"/>
                    <UseObject NpcId="2005060" XYZ="-4.135254, 0.01519775, -9.628479" Radius="10" QuestId="65956" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65956) == 2">
                    <GetTo ZoneId="351" Name="F'lhaminn" XYZ="7.736328, -7.450581E-09, -8.438293"/>
                    <TalkTo NpcId="1011612" XYZ="7.736328, -7.450581E-09, -8.438293" QuestId="65956" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65956) == 3">
                    <GetTo ZoneId="156" Name="Tataru" XYZ="27.02368, 32.41246, -697.3525"/>
                    <TalkTo NpcId="1010979" XYZ="27.02368, 32.41246, -697.3525" QuestId="65956" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65956) == 255">
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                    <TurnIn QuestId="65956" NpcId="1008969" XYZ="0.9917603, -1.995725, -45.70081"/>
                </If>
            </If>
        </If>
        <!-- An Unexpected Ambition -->
        <If Condition="not IsQuestCompleted(65957)">
            <If Condition="not HasQuest(65957)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                <If Condition="IsQuestAcceptQualified(65957)">
                    <PickupQuest NpcId="1010897" QuestId="65957" XYZ="0.9917603, -1.995725, -45.70081"/>
                </If>
            </If>
            <If Condition="HasQuest(65957)">
                <If Condition="GetQuestStep(65957) == 1">
                    <GetTo ZoneId="129" XYZ="-341.6648, -2.374471, 10.69653"/> <!-- Tataru -->
                    <TalkTo NpcId="1010980" XYZ="-341.6648, -2.374471, 10.69653" QuestId="65957" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65957) == 2">
                    <GetTo ZoneId="129" XYZ="-326.3752, 12.89966, 9.994568"/> <!-- Thubyrgeim -->
                    <TalkTo NpcId="1000909" XYZ="-326.3752, 12.89966, 9.994568" QuestId="65957" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65957) == 3">
                    <GetTo ZoneId="134" XYZ="-1.022339, 29.55664, 172.9609"/> <!-- Destination -->
                    <UseObject NpcId="2005073" XYZ="-1.022339, 29.55664, 172.9609" Radius="10" QuestId="65957" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65957) == 4">
                    <GetTo ZoneId="134" XYZ="124.7424, 45.74832, 135.7594"/> <!-- Tataru -->
                    <TalkTo NpcId="1010981" XYZ="124.7424, 45.74832, 135.7594" QuestId="65957" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(65957) == 255">
                    <GetTo ZoneId="129" XYZ="-326.3752, 12.89966, 9.994568"/> <!-- Thubyrgeim -->
                    <TurnIn QuestId="65957" NpcId="1000909" XYZ="-326.3752, 12.89966, 9.994568"/>
                </If>
            </If>
        </If>
        <!-- Ancient Ways, Timeless Wants -->
        <If Condition="not IsQuestCompleted(65958)">
            <If Condition="not HasQuest(65958)">
                <GetTo ZoneId="129" XYZ="-329.0914, 12.89974, 12.03937"/> <!-- Tataru -->
                <If Condition="IsQuestAcceptQualified(65958)">
                    <PickupQuest NpcId="1011020" QuestId="65958" XYZ="-329.0914, 12.89974, 12.03937"/>
                </If>
            </If>
            <If Condition="HasQuest(65958)">
                <If Condition="GetQuestStep(65958) == 1">
                    <GetTo ZoneId="137" XYZ="570.1838, 20.67162, 490.6233"/> <!-- Tataru -->
                    <TalkTo NpcId="1010982" XYZ="570.1838, 20.67162, 490.6233" QuestId="65958" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65958) == 2">
                    <GetTo ZoneId="137" XYZ="594.7814, 8.632993, 601.77"/> <!-- Tataru -->
                    <TalkTo NpcId="1010983" XYZ="594.7814, 8.632993, 601.77" QuestId="65958" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65958) == 3">
                    <GetTo ZoneId="137" XYZ="602.9907, 8.987488, 577.6608"/> <!-- Destination -->
                    <UseObject NpcId="2005064" XYZ="602.9907, 8.987488, 577.6608" Radius="10" QuestId="65958" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65958) == 4">
                    <GetTo ZoneId="137" XYZ="594.7814, 8.632993, 601.77"/> <!-- Tataru -->
                    <TalkTo NpcId="1010983" XYZ="594.7814, 8.632993, 601.77" QuestId="65958" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(65958) == 255">
                    <GetTo ZoneId="351" Name="Minfilia" XYZ="-0.01635557, -1.995725, -41.12296"/>
                    <TurnIn QuestId="65958" NpcId="1010897" XYZ="0.9917603, -1.995725, -45.70081"/>
                </If>
            </If>
        </If>
        <!-- Where We Are Needed -->
        <If Condition="not IsQuestCompleted(65959)">
            <If Condition="not HasQuest(65959)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                <If Condition="IsQuestAcceptQualified(65959)">
                    <PickupQuest NpcId="1010897" QuestId="65959" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
            <If Condition="HasQuest(65959)">
                <If Condition="GetQuestStep(65959) == 1">
                    <GetTo ZoneId="351" Name="Hoary Boulder" XYZ="-1.327576, 7.450581E-09, -2.700867"/>
                    <TalkTo NpcId="1011615" XYZ="-1.327576, 7.450581E-09, -2.700867" QuestId="65959" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65959) == 2">
                    <GetTo ZoneId="153" XYZ="-207.4464, 20.86788, 360.067"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010984" XYZ="-207.4464, 20.86788, 360.067" QuestId="65959" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65959) == 3">
                    <GetTo ZoneId="153" XYZ="-223.7126, 12.27764, 47.98962"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010985" XYZ="-223.7126, 12.27764, 47.98962" QuestId="65959" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65959) == 4">
                    <GetTo ZoneId="153" XYZ="-225.269, 13.13794, 56.90088"/> <!-- Destination -->
                    <UseObject NpcId="2005065" XYZ="-225.269, 13.13794, 56.90088" Radius="10" QuestId="65959" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(65959) == 5">
                    <GetTo ZoneId="153" XYZ="-223.7126, 12.27764, 47.98962"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010985" XYZ="-223.7126, 12.27764, 47.98962" QuestId="65959" StepId="5"/>
                </If>
                <If Condition="GetQuestStep(65959) == 6">
                    <GetTo ZoneId="153" XYZ="122.9419, 24.53415, 169.7261"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010986" XYZ="122.9419, 24.53415, 169.7261" QuestId="65959" StepId="6"/>
                </If>
                <If Condition="GetQuestStep(65959) == 7">
                    <GetTo ZoneId="153" XYZ="109.6665, 24.15503, 174.7616"/> <!-- Destination -->
                    <UseObject NpcId="2005066" XYZ="109.6665, 24.15503, 174.7616" Radius="10" QuestId="65959" StepId="7"/>
                </If>
                <If Condition="GetQuestStep(65959) == 8">
                    <GetTo ZoneId="153" XYZ="122.9419, 24.53415, 169.7261"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010986" XYZ="122.9419, 24.53415, 169.7261" QuestId="65959" StepId="8"/>
                </If>
                <If Condition="GetQuestStep(65959) == 9">
                    <GetTo ZoneId="153" XYZ="-355.2453, 0.6691613, 459.3728"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010987" XYZ="-355.2453, 0.6691613, 459.3728" QuestId="65959" StepId="9"/>
                </If>
                <If Condition="GetQuestStep(65959) == 10">
                    <GetTo ZoneId="153" XYZ="-338.4299, -0.07635498, 453.4828"/> <!-- Destination -->
                    <UseObject NpcId="2005067" XYZ="-338.4299, -0.07635498, 453.4828" Radius="10" QuestId="65959" StepId="10"/>
                </If>
                <If Condition="GetQuestStep(65959) == 11">
                    <GetTo ZoneId="153" XYZ="-355.2453, 0.6691613, 459.3728"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010987" XYZ="-355.2453, 0.6691613, 459.3728" QuestId="65959" StepId="11"/>
                </If>
                <If Condition="GetQuestStep(65959) == 255">
                    <GetTo ZoneId="153" XYZ="-207.4464, 20.86788, 360.067"/> <!-- Unsettled Scholar -->
                    <TurnIn QuestId="65959" NpcId="1010984" XYZ="-207.4464, 20.86788, 360.067"/>
                </If>
            </If>
        </If>
        <!-- The Least Among Us -->
        <If Condition="not IsQuestCompleted(65960)">
            <If Condition="not HasQuest(65960)">
                <GetTo ZoneId="153" XYZ="-207.4464, 20.86788, 360.067"/> <!-- Unsettled Scholar -->
                <If Condition="IsQuestAcceptQualified(65960)">
                    <PickupQuest NpcId="1010984" QuestId="65960" XYZ="-207.4464, 20.86788, 360.067"/>
                </If>
            </If>
            <If Condition="HasQuest(65960)">
                <If Condition="GetQuestStep(65960) == 1">
                    <GetTo ZoneId="153" XYZ="608.5513, 21.65253, 94.61467"/> <!-- Unsettled Scholar -->
                    <TalkTo NpcId="1010988" XYZ="618.4023, 22.52846, 105.6382" QuestId="65960" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65960) == 2">
                    <GetTo ZoneId="153" XYZ="604.5776, 24.03296, 105.1194"/> <!-- Destination -->
                    <UseObject NpcId="2005068" XYZ="604.5776, 24.03296, 105.1194" Radius="10" QuestId="65960" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65960) == 255">

                    <!-- Rewards

                    0: Durability Draught
                    1: Spiritbond Potion

                    If you want a specific reward from the above list, replace the TurnIn tag below with the following and change the "Reward Slot" to the number you want:

                    <TurnIn QuestId="65960" NpcId="1010897" XYZ="0.9613037, -1.995725, -45.60925" RewardSlot="0" />

                    -->

                    <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                    <TurnIn QuestId="65960" NpcId="1010897" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
        </If>

        <!-- Crystal Tower stuff that is now required  -->

        <!-- Legacy of Allag -->
        <If Condition="not IsQuestCompleted(67245)">
            <If Condition="not HasQuest(67245)">
                <GetTo ZoneId="156" XYZ="17.99036, 20.38557, -665.7969"/>
                <If Condition="IsQuestAcceptQualified(67245)">
                    <PickupQuest NpcId="1007753" QuestId="67245"/>
                </If>
            </If>
            <If Condition="HasQuest(67245)">
                <If Condition="GetQuestStep(67245) == 1">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TalkTo QuestId="67245" StepId="1" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
                <If Condition="GetQuestStep(67245) == 2">
                    <GetTo ZoneId="156" XYZ="446.8298, -5.306207, -465.7206"/>
                    <TalkTo QuestId="67245" StepId="2" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>

                <If Condition="GetQuestStep(67245) == 3">
                    <If Condition="not IsTodoChecked(67245, 3, 0)">
                        <GetTo ZoneId="180" XYZ="-110.2852, 64.27157, -215.4758"/>
                        <FlyTo Land="True" XYZ="75.34261, 55.38784, -500.193"/>
                        <NoCombatMoveTo XYZ="104.4518, 21.82695, -630.8898"/>
                        <UseObject NpcIds="2000075" XYZ="102.1591, 21.56091, -632.8679" UseTimes="1" Radius="25" QuestId="67245"/>
                    </If>
                    <If Condition="not IsTodoChecked(67245, 3, 1)">
                        <GetTo ZoneId="138" XYZ="211.1497, -24.83019, 205.6833"/>
                        <FlyTo Land="True" XYZ="-355.4875, -39.8149, -350.2271"/>
                        <NoCombatMoveTo XYZ="-502.9832, -32.07358, -369.0395"/>
                        <UseObject NpcIds="2000076" XYZ="-486.8696, -32.45593, -368.8258" UseTimes="1" Radius="25" QuestId="67245"/>
                        <WaitWhile Condition="GetQuestStep(67245) == 3"/>
                    </If>
                </If>
                <If Condition="GetQuestStep(67245) == 4">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <HandOver ItemId="2002484,2002485" QuestId="67245" StepId="4" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>

                <If Condition="GetQuestStep(67245) == 5">
                    <If Condition="not IsTodoChecked(67245, 5, 0)">
                        <GetTo ZoneId="146" XYZ="-319.8897, 8.264349, 410.1667"/>
                        <FlyTo XYZ="139.9123, 58.48904, 156.7852"/>
                        <FlyTo Land="True" XYZ="231.0225, 7.999999, -21.5153"/>
                        <UseObject NpcIds="2000077" XYZ="233.3562, 7.980469, -22.7207" UseTimes="1" Radius="25" QuestId="67245"/>
                    </If>
                    <If Condition="not IsTodoChecked(67245, 5, 1)">
                        <GetTo ZoneId="155" XYZ="255.6224, 312, -232.6866"/>
                        <FlyTo Land="True" XYZ="613.5499, 301.8081, -101.4268"/>
                        <UseObject NpcIds="2000078" XYZ="613.5499, 301.8081, -101.4268" UseTimes="1" Radius="25" QuestId="67245"/>
                        <WaitWhile Condition="GetQuestStep(67245) == 5"/>
                    </If>
                </If>
                <If Condition="GetQuestStep(67245) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn ItemId="2002486,2002487" QuestId="67245" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>

        <!-- Sanding It Down -->
        <If Condition="not IsQuestCompleted(66736)">
            <If Condition="not HasQuest(66736)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66736)">
                    <PickupQuest NpcId="1006725" QuestId="66736"/>
                </If>
            </If>
            <If Condition="HasQuest(66736)">
                <If Condition="GetQuestStep(66736) == 1">
                    <GetTo ZoneId="131" XYZ="-26.15236, 12.2, 109.3008"/>
                    <HandOver ItemId="2001099" QuestId="66736" StepId="1" NpcId="1004093" XYZ="-25.16223, 12.2, 110.7957"/>
                </If>
                <If Condition="GetQuestStep(66736) == 2">
                    <GetTo ZoneId="131" XYZ="-35.89328, 13.59998, 99.81605"/>
                    <TalkTo QuestId="66736" StepId="2" NpcId="1007755" XYZ="-34.62274, 13.59995, 99.47351"/>
                </If>
                <If Condition="GetQuestStep(66736) == 3">
                    <GetTo ZoneId="147" XYZ="5.735602, 3.965631, 413.4424"/>
                    <TalkTo QuestId="66736" StepId="3" NpcId="1007756" XYZ="4.501404, 4.225797, 411.5815"/>
                </If>
                <If Condition="GetQuestStep(66736) == 4">
                    <GetTo ZoneId="147" XYZ="5.735602, 3.965631, 413.4424"/>
                    <FlyTo Land="True" XYZ="228.7098, 25, 78.32162"/>
                    <UseObject NpcIds="1007759" XYZ="246.5704, 25.743, 85.28259" Radius="25" QuestId="66736" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(66736) == 5">
                    <GetTo ZoneId="147" XYZ="257.1349, 25, 43.7706"/>
                    <UseObject NpcIds="2002892" XYZ="259.3881, 24.979, 44.1748" Radius="25" QuestId="66736" StepId="5"/>
                </If>
                <If Condition="GetQuestStep(66736) == 6">
                    <GetTo ZoneId="147" XYZ="246.1644, 25.743, 82.54205"/>
                    <HandOver ItemId="2001098" QuestId="66736" StepId="6" NpcId="1007759" XYZ="246.5704, 25.743, 85.28259"/>
                </If>
                <If Condition="GetQuestStep(66736) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="66736" NpcId="1006725" ItemId="2001097,2001098" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>
        <!-- A Performance for the Ages -->
        <If Condition="not IsQuestCompleted(66737)">
            <If Condition="not HasQuest(66737)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66737)">
                    <PickupQuest NpcId="1006725" QuestId="66737"/>
                </If>
            </If>
            <If Condition="HasQuest(66737)">
                <If Condition="GetQuestStep(66737) == 1">
                    <GetTo ZoneId="133" XYZ="168.6311, 15.5, -90.6492"/>
                    <TalkTo QuestId="66737" StepId="1" NpcId="1000768" XYZ="172.3506, 15.5, -89.95197"/>
                </If>
                <If Condition="GetQuestStep(66737) == 2">
                    <GetTo ZoneId="153" XYZ="182.2874, 8.084711, -60.75514"/>
                    <FlyTo Land="True" XYZ="462.1663, 0.3782269, 156.4841"/>
                    <UseObject NpcIds="2002893" XYZ="467.399, 2.212463, 154.0398" Radius="25" QuestId="66737" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(66737) == 3">
                    <GetTo ZoneId="154" XYZ="-29.87342, -40.87434, 235.5547"/>
                    <FlyTo Land="True" XYZ="-146.016, -9.340907, -65.70419"/>
                    <UseObject NpcIds="2002894" XYZ="-152.8496, -8.46875, -78.50769" Radius="25" QuestId="66737" StepId="3"/>
                </If>

                <If Condition="GetQuestStep(66737) == 4">
                    <GetTo ZoneId="154" XYZ="30.06263, 0.7557529, -94.13765"/>
                    <UseObject NpcIds="2002896" XYZ="28.82422, 1.571594, -96.78796" Radius="25" QuestId="66737" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(66737) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="66737" NpcId="1006725" ItemId="2001100,2001101" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>

        <!-- Labyrinth of the Ancients -->
        <If Condition="not IsQuestCompleted(66738)">
            <If Condition="not HasQuest(66738)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66738)">
                    <PickupQuest NpcId="1007763" QuestId="66738"/>
                </If>
            </If>
            <If Condition="HasQuest(66738)">
                <If Condition="GetQuestStep(66738) == 1">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <FlyTo Land="True" XYZ="548.5551, -3.959982, -345.8924"/>
                    <NoCombatMoveTo XYZ="573.1744, -1.724304, -262.7756"/>
                    <UseObject NpcIds="2002897" XYZ="573.1744, -1.724304, -262.7756" Radius="25" QuestId="66738" StepId="1"/>
                </If>

                <If Condition="GetQuestStep(66738) == 2">
                    <UserDialog QuestId="66738" StepId="2" DialogText="Please manually complete Labyrinth of the Ancients duty" />
                </If>
                <If Condition="GetQuestStep(66738) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>

                    <TurnIn QuestId="66738" NpcId="1007763" XYZ="447.4403, -5.350042, -467.7959"/>
                </If>
            </If>
        </If>

        <!-- For Prosperity -->
        <If Condition="not IsQuestCompleted(66739)">
            <If Condition="not HasQuest(66739)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66739)">
                    <PickupQuest NpcId="1007763" QuestId="66739"/>
                </If>
            </If>
            <If Condition="HasQuest(66739)">
                <If Condition="GetQuestStep(66739) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="66739" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>

        <!-- Syrcus Tower -->
        <If Condition="not IsQuestCompleted(67010)">
            <If Condition="not HasQuest(67010)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(67010)">
                    <PickupQuest NpcId="1006725" QuestId="67010"/>
                </If>
            </If>
            <If Condition="HasQuest(67010)">
                <If Condition="GetQuestStep(67010) == 1">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>
                    <TalkTo QuestId="67010" StepId="1" NpcId="1009372" XYZ="640.1312, -1.014509, -137.5906"/>
                </If>
                <If Condition="GetQuestStep(67010) == 2">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>
                    <TalkTo QuestId="67010" StepId="2" NpcId="1009374" XYZ="734.1573, 15.33049, -55.83282"/>
                </If>
                <If Condition="GetQuestStep(67010) == 3">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>
                    <TalkTo QuestId="67010" StepId="3" NpcId="1009376" XYZ="730.7391, 15.42845, -56.16852"/>
                </If>
                <If Condition="GetQuestStep(67010) == 4">
                    <UserDialog QuestId="67010" StepId="4" DialogText="Please manually complete Syrcus Tower duty" />
                    <WaitWhile Condition="GetQuestStep(67010) != 255"/>
                </If>
                <If Condition="GetQuestStep(67010) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="67010" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>


        <!-- The World of Darkness -->
        <If Condition="not IsQuestCompleted(66030)">
            <If Condition="not HasQuest(66030)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66030)">
                    <PickupQuest NpcId="1006725" QuestId="66030"/>
                </If>
            </If>
            <If Condition="HasQuest(66030)">
                <If Condition="GetQuestStep(66030) == 1">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>

                    <TalkTo QuestId="66030" StepId="1" NpcId="1011638" XYZ="664.8203, -1.126307, -106.5233"/>
                </If>
                <If Condition="GetQuestStep(66030) == 2">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>
                    <TalkTo QuestId="66030" StepId="2" NpcId="1011640" XYZ="732.0515, 15.33271, -68.65039"/>
                </If>
                <If Condition="GetQuestStep(66030) == 3">
                    <UserDialog QuestId="66030" StepId="3" DialogText="Please manually complete The World of Darkness duty" />
                    <WaitWhile Condition="GetQuestStep(66030) != 255"/>
                </If>
                <If Condition="GetQuestStep(66030) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="66030" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>
        <!-- The Light of Hope -->
        <If Condition="not IsQuestCompleted(66031)">
            <If Condition="not HasQuest(66031)">
                <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                    <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                </If>
                <If Condition="IsQuestAcceptQualified(66031)">
                    <PickupQuest NpcId="1006725" QuestId="66031"/>
                </If>
            </If>
            <If Condition="HasQuest(66031)">
                <If Condition="GetQuestStep(66031) == 1">
                    <If Condition="not IsOnMap(156)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                    </If>
                    <If Condition="not IsOnSubMap(941) and not IsOnSubMap(942)">
                        <If Condition="not IsOnSubMap(416)">
                            <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                            <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                        </If>
                        <NoCombatMoveTo XYZ="575.0993,-1.987052,-263.8637"/>
                        <UseTransport Name="Crystal Gate" NpcId="2002927" XYZ="575.0993,-1.987052,-263.8637"/>
                    </If>
                    <TalkTo QuestId="66031" StepId="1" NpcId="1011641" XYZ="706.4468, 15.33271, -71.27496"/>
                </If>
                <If Condition="GetQuestStep(66031) == 255">
                    <If Condition="not IsOnMap(156) or not IsOnSubMap(416)">
                        <GetTo ZoneId="156" XYZ="97.45586, 19.96003, -615.7347"/>
                        <FlyTo Land="True" AllowedVariance="2.0" XYZ="443.1403, -5.461415, -467.7136"/>
                    </If>
                    <TurnIn QuestId="66031" NpcId="1006725" XYZ="446.8298, -5.306207, -465.7206"/>
                </If>
            </If>
        </If>
        <!-- End Crystal Tower stuff -->


        <!-- A Time to Every Purpose -->
        <If Condition="not IsQuestCompleted(65961)">
            <If Condition="not HasQuest(65961)">
                <GetTo ZoneId="351" Name="Minfilia" XYZ="0.6262804, -1.995725, -39.62891"/>
                <If Condition="IsQuestAcceptQualified(65961)">
                    <PickupQuest NpcId="1010897" QuestId="65961" XYZ="0.9613037, -1.995725, -45.60925"/>
                </If>
            </If>
            <If Condition="HasQuest(65961)">
                <If Condition="GetQuestStep(65961) == 255">
                    <GetTo ZoneId="131" XYZ="-6.149414, 29.99998, 19.15009"/> <!-- Minfilia -->
                    <TurnIn QuestId="65961" NpcId="1010992" XYZ="-6.149414, 29.99998, 19.15009"/>
                </If>
            </If>
        </If>
        <!-- Come, but Not Gone -->
        <If Condition="not IsQuestCompleted(65962)">
            <If Condition="not HasQuest(65962)">
                <GetTo ZoneId="131" XYZ="-6.149414, 29.99998, 19.15009"/> <!-- Minfilia -->
                <If Condition="IsQuestAcceptQualified(65962)">
                    <PickupQuest NpcId="1010992" QuestId="65962" XYZ="-6.149414, 29.99998, 19.15009"/>
                </If>
            </If>
            <If Condition="HasQuest(65962)">
                <If Condition="GetQuestStep(65962) == 1">
                    <GetTo ZoneId="130" XYZ="22.0863, 6.999994, -81.99655"/> <!-- Momodi -->
                    <TalkTo NpcId="1001353" XYZ="21.07263, 7.45, -78.78235" QuestId="65962" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65962) == 2">
                    <GetTo ZoneId="141" XYZ="-289.1738, 22.81219, -56.6568"/> <!-- Destination -->
                    <UseObject NpcId="2005069" XYZ="-289.1738, 22.81219, -56.6568" Radius="10" QuestId="65962" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65962) == 3">
                    <GetTo ZoneId="141" XYZ="-289.1738, 22.81219, -56.6568"/> <!-- Destination -->
                    <UseObject NpcId="2005070" XYZ="-289.1738, 22.81219, -56.6568" Radius="10" QuestId="65962" StepId="3"/>
                </If>
                <If Condition="GetQuestStep(65962) == 4">
                    <GetTo ZoneId="141" XYZ="-289.1738, 22.81219, -56.6568"/> <!-- Destination -->
                    <UseObject NpcId="2005072" XYZ="-289.1738, 22.81219, -56.6568" Radius="10" QuestId="65962" StepId="4"/>
                </If>
                <If Condition="GetQuestStep(65962) == 255">
                    <GetTo ZoneId="130" XYZ="22.0863, 6.999994, -81.99655"/> <!-- Momodi -->
                    <TurnIn QuestId="65962" NpcId="1001353" ItemId="2001545" XYZ="21.07263, 7.45, -78.78235"/>
                </If>
            </If>
        </If>
        <!-- The Parting Glass -->
        <If Condition="not IsQuestCompleted(65963)">
            <If Condition="not HasQuest(65963)">
                <GetTo ZoneId="130" XYZ="22.0863, 6.999994, -81.99655"/> <!-- Momodi-->
                <If Condition="IsQuestAcceptQualified(65963)">
                    <PickupQuest NpcId="1001353" QuestId="65963" XYZ="21.07263, 7.45, -78.78235"/>
                </If>
            </If>
            <If Condition="HasQuest(65963)">
                <If Condition="GetQuestStep(65963) == 1">
                    <GetTo ZoneId="131" XYZ="-22.35449, 38.01001, 83.42102"/> <!-- Lady-in-waiting -->
                    <TalkToPlus NpcId="1010997" XYZ="-22.35449, 38.01001, 83.42102" QuestId="65963" StepId="1"/>
                </If>
                <If Condition="GetQuestStep(65963) == 2">
                    <GetTo ZoneId="141" XYZ="78.41602, -0.6357315, -166.3386"/> <!-- Pipin -->
                    <TalkTo NpcId="1010998" XYZ="78.41602, -0.6357315, -166.3386" QuestId="65963" StepId="2"/>
                </If>
                <If Condition="GetQuestStep(65963) == 255">
                    <GetTo ZoneId="155" XYZ="263.5996, 303.1, -199.9695"/> <!-- Haurchefant -->
                    <TurnIn QuestId="65963" NpcId="1006384" XYZ="263.5996, 303.1, -199.9695"/>
                </If>
            </If>
        </If>
        <!-- Before the Dawn -->
        <If Condition="not IsQuestCompleted(65964)">
            <If Condition="not HasQuest(65964)">
                <GetTo ZoneId="155" XYZ="263.5996, 303.1, -199.9695"/> <!-- Haurchefant -->
                <If Condition="IsQuestAcceptQualified(65964)">
                    <PickupQuest NpcId="1006384" QuestId="65964" XYZ="263.5996, 303.1, -199.9695"/>
                </If>
            </If>
            <If Condition="HasQuest(65964)">
                <If Condition="GetQuestStep(65964) == 255">
                    <GetTo ZoneId="155" XYZ="264.9119, 302.2624, -223.7126"/> <!-- House Fortemps Guard -->
                    <TurnInPlus QuestId="65964" NpcId="1007603" XYZ="264.9119, 302.2624, -223.7126"/>
                </If>
            </If>
        </If>

        <If Condition="IsQuestCompleted(65964)">
            <RunCode Name="2_5_Questline"/>
            <StopBot/>
        </If>

    </Order>
    <CodeChunks>

        <!-- Job Check -->

        <CodeChunk Name="EquipBRDCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4546)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipBLMCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4548)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipDRGCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4545)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipMNKCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4543)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipNINCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 7886)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipPLDCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4542)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipSCHCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4550)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipSMNCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4549)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipWARCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4544)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>
        <CodeChunk Name="EquipWHMCrystal">
            <![CDATA[ 
                await Buddy.Coroutines.Coroutine.Sleep(1000);
                BagSlot EquipSlot = ff14bot.Managers.InventoryManager.GetBagByInventoryBagId(ff14bot.Enums.InventoryBagId.EquippedItems)[ff14bot.Enums.EquipmentSlot.SoulCrystal];

                foreach(ff14bot.Managers.BagSlot slot in ff14bot.Managers.InventoryManager.FilledInventoryAndArmory)
                {
                if(slot.RawItemId == 4547)
                {
                    slot.Move(EquipSlot);
                }
                }
                await Buddy.Coroutines.Coroutine.Sleep(1000);
            ]]>
        </CodeChunk>

        <!-- Patch 2.5 -->
        <CodeChunk Name="Jump_Forward">
            <![CDATA[
				MovementManager.MoveForwardStart();
				await Coroutine.Sleep(500);
				ff14bot.Managers.MovementManager.Jump();
				await Coroutine.Sleep(2000);
				MovementManager.MoveForwardStop();
				await Coroutine.Sleep(500);
		    ]]>
        </CodeChunk>
        <CodeChunk Name="The_Steps_of_Faith">
            <![CDATA[ 
                while (ConditionParser.GetQuestStep(65955) == 1)
                {
                    System.Windows.Media.Color textColor = System.Windows.Media.Color.FromRgb(29,213,226);
                    System.Windows.Media.Color shadowColor = System.Windows.Media.Color.FromRgb(13,106,175);
                    Core.OverlayManager.AddToast(() => "[A Realm Reborn (2.5)]\nPlease manually complete The Steps of Faith duty!", TimeSpan.FromMilliseconds(25000), textColor, shadowColor, new System.Windows.Media.FontFamily("Gautami"));
                    await Coroutine.Sleep(26000);
                }
            ]]>
        </CodeChunk>
        <CodeChunk Name="2_5_Questline">
            <![CDATA[ 
                while (ConditionParser.GetQuestStep(65964) != 255)
                {
                    System.Windows.Media.Color textColor = System.Windows.Media.Color.FromRgb(29,213,226);
                    System.Windows.Media.Color shadowColor = System.Windows.Media.Color.FromRgb(13,106,175);
                    Core.OverlayManager.AddToast(() => "You've completed the A Realm Reborn (Patch 2.5) questline!\nPlease load the Heavensward profile\nif you would like to continue questing!", TimeSpan.FromMilliseconds(25000), textColor, shadowColor, new System.Windows.Media.FontFamily("Gautami"));
                    await Coroutine.Sleep(26000);
                }
            ]]>
        </CodeChunk>
    </CodeChunks>
    <GrindAreas>
        <GrindArea name="Bait_and_Switch">
            <Hotspots>
                <Hotspot Radius="90" XYZ="349.0806, 23.13136, 103.8071" name="Black Marketeer Mobs"/>
            </Hotspots>
            <TargetMobs>
                <TargetMob Id="3332" Weight="2000"/> <!-- Black Marketeer Bodyguard -->
                <TargetMob Id="3333" Weight="1000"/> <!-- Black Marketeer Bodyguard Head -->
            </TargetMobs>
            <MinLevel>50</MinLevel>
            <MaxLevel>71</MaxLevel>
        </GrindArea>
        <GrindArea name="On_the_Counteroffensive">
            <Hotspots>
                <Hotspot Radius="90" XYZ="-258.1064, 60.33958, -65.62909" name="7th Cohort Mobs"/>
            </Hotspots>
            <TargetMobs>
                <TargetMob Id="3334" Weight="3000"/> <!-- 7th Cohort Signifer -->
                <TargetMob Id="3110" Weight="2000"/> <!-- 7th Cohort Hoplomachus -->
                <TargetMob Id="3118" Weight="1000"/> <!-- 7th Cohort Vanguard -->
            </TargetMobs>
            <MinLevel>50</MinLevel>
            <MaxLevel>71</MaxLevel>
        </GrindArea>
        <GrindArea name="On_the_Counteroffensive2">
            <Hotspots>
                <Hotspot Radius="90" XYZ="-267.4754, 82.42139, -177.8135" name="7th Cohort Mobs"/>
            </Hotspots>
            <TargetMobs>
                <TargetMob Id="3335" Weight="3000"/> <!-- 7th Cohort Reaper -->
                <TargetMob Id="2120" Weight="2000"/> <!-- 7th Cohort Eques -->
                <TargetMob Id="3118" Weight="1000"/> <!-- 7th Cohort Vanguard -->
            </TargetMobs>
            <MinLevel>50</MinLevel>
            <MaxLevel>71</MaxLevel>
        </GrindArea>
        <GrindArea name="An_Allied_Perspective">
            <Hotspots>
                <Hotspot Radius="90" XYZ="-495.8852, 206.4118, -363.0651" name="Dravanian Forces"/>
            </Hotspots>
            <TargetMobs>
                <TargetMob Id="3339" Weight="2000"/> <!-- Assault Wyvern -->
                <TargetMob Id="3338" Weight="1000"/> <!-- Horde Runner -->
            </TargetMobs>
            <MinLevel>50</MinLevel>
            <MaxLevel>71</MaxLevel>
        </GrindArea>
        <GrindArea name="An_Allied_Perspective2">
            <Hotspots>
                <Hotspot Radius="90" XYZ="128.5977, 372.7061, -649.8469" name="Dravanian Forces"/>
            </Hotspots>
            <TargetMobs>
                <TargetMob Id="3337" Weight="2000"/> <!-- Horde Commander -->
                <TargetMob Id="3336" Weight="1000"/> <!-- Horde Scout -->
            </TargetMobs>
            <MinLevel>50</MinLevel>
            <MaxLevel>71</MaxLevel>
        </GrindArea>
    </GrindAreas>
</Profile>